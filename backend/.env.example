# 后端环境变量
# 是否开启调试模式
DEBUG=true
# JWT 签名密钥（生产必须更换）
SECRET_KEY=your-super-secret-key-change-in-production
# 数据库连接串（建议显式指定 utf8mb4）
DATABASE_URL=mysql+aiomysql://root:password@localhost:3306/chicken_king?charset=utf8mb4
# Redis 连接地址
REDIS_URL=redis://localhost:6379/0
# 限流存储地址（为空回退 REDIS_URL）
RATE_LIMIT_STORAGE_URI=redis://localhost:6379/1
# 单用户每日上传总量上限（字节）
UPLOAD_DAILY_BYTES_LIMIT=3221225472
# 触发式挑战模式：off/monitor/enforce
SECURITY_CHALLENGE_MODE=off
# 挑战提供方：pow/js/captcha/behavior
SECURITY_CHALLENGE_PROVIDER=pow
# 触发阈值（窗口内请求数）
SECURITY_CHALLENGE_THRESHOLD=20
# 统计窗口（秒）
SECURITY_CHALLENGE_WINDOW_SECONDS=60
# 挑战有效期（秒）
SECURITY_CHALLENGE_TTL_SECONDS=300
# 通过后免验证时间（秒）
SECURITY_CHALLENGE_PASS_TTL_SECONDS=1800
# PoW 难度（十六进制前导 0 个数）
SECURITY_POW_DIFFICULTY=4
# 验证码校验地址（如 Turnstile/hCaptcha）
CAPTCHA_VERIFY_URL=
# 验证码服务密钥
CAPTCHA_SECRET_KEY=
# 验证码站点 key
CAPTCHA_SITE_KEY=
# 忘记密码重置链接有效期（分钟）
PASSWORD_RESET_TOKEN_TTL_MINUTES=30
# SMTP 服务器地址
SMTP_HOST=
# SMTP 端口
SMTP_PORT=587
# SMTP 账号
SMTP_USERNAME=
# SMTP 密码
SMTP_PASSWORD=
# 是否启用 STARTTLS
SMTP_USE_TLS=true
# 是否启用 SSL（如 465 端口）
SMTP_USE_SSL=false
# 发件人邮箱
SMTP_FROM_EMAIL=
# 发件人显示名（可选）
SMTP_FROM_NAME=
# 是否启用可信代理解析（TODO: CDN/WAF 接入后开启）
TRUSTED_PROXY_ENABLED=false
# 可信代理头（优先级顺序）
TRUSTED_PROXY_HEADERS=cf-connecting-ip,x-forwarded-for,x-real-ip

# 前端地址（OAuth 回跳用）
FRONTEND_URL=http://localhost:5173

# 媒体文件存储目录
MEDIA_ROOT=/app/app/uploads/media

# 作品部署提交流程配置
# 提交冷却时间（秒）
PROJECT_SUBMISSION_COOLDOWN_SECONDS=600
# 每日提交上限
PROJECT_SUBMISSION_DAILY_LIMIT=10
# Worker 回写 API 令牌
WORKER_API_TOKEN=change-me
# Worker 回写 API 基地址
WORKER_API_BASE_URL=http://127.0.0.1:8000
# Worker 队列 key
WORKER_QUEUE_KEY=project_submissions:queue
# 队列阻塞等待秒数
WORKER_QUEUE_BLOCK_SECONDS=5
# Worker 步骤间隔秒数
WORKER_STEP_DELAY_SECONDS=2
# 启用健康检查
WORKER_HEALTHCHECK_ENABLED=false
# 健康检查路径
WORKER_HEALTHCHECK_PATH=/healthz
# 健康检查超时秒数
WORKER_HEALTHCHECK_TIMEOUT_SECONDS=5
# 健康检查重试次数
WORKER_HEALTHCHECK_RETRY=12
# 健康检查间隔秒数
WORKER_HEALTHCHECK_INTERVAL_SECONDS=5
# Docker 连接地址
WORKER_DOCKER_HOST=unix:///var/run/docker.sock
# 部署网络（为空自动探测）
WORKER_DEPLOY_NETWORK=
# 作品容器内部端口
WORKER_PROJECT_PORT=8080
# 容器内存上限
WORKER_CONTAINER_MEMORY_LIMIT=1g
# 容器 CPU 上限（核数）
WORKER_CONTAINER_CPU_LIMIT=1.0
# 容器 PIDs 上限
WORKER_CONTAINER_PIDS_LIMIT=256
# 容器日志单文件大小
WORKER_CONTAINER_LOG_MAX_SIZE=10m
# 容器日志文件数量
WORKER_CONTAINER_LOG_MAX_FILE=3
# 作品域名后缀
PROJECT_DOMAIN_SUFFIX=local
# 作品域名模板
PROJECT_DOMAIN_TEMPLATE=project-{submission_id}.{suffix}

# Linux.do OAuth2
# Client ID
LINUX_DO_CLIENT_ID=your-client-id
# Client Secret
LINUX_DO_CLIENT_SECRET=your-client-secret
# 回调地址
LINUX_DO_REDIRECT_URI=http://127.0.0.1:8000/api/v1/auth/linuxdo/callback
